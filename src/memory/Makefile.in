# (c) 2011 University of Houston System.  All rights reserved.

# ---------------------------------------------------------
#
# the malloc library
#
MALLOC_DIR           = ../dlmalloc
MALLOC_CPPFLAGS      = -I$(MALLOC_DIR)

# ---------------------------------------------------------

COMMS_DIR            =    ../comms
COMMS_CPPFLAGS       =    -I$(COMMS_DIR)

# ---------------------------------------------------------

GLOBALVAR_DIR        =    ../globalvar
GLOBALVAR_CPPFLAGS   =    -I$(GLOBALVAR_DIR)

# ---------------------------------------------------------

CC               = @CC@
CFLAGS           = @CFLAGS@
CPPFLAGS         = @CPPFLAGS@
LD               = @LD@
LDFLAGS          = @LDFLAGS@

ifeq "@DEBUG@" "TRUE"
CPPFLAGS        += -DDEBUG
endif

CPPFLAGS        += -I.
CPPFLAGS        += -I..

CFLAGS          += -fPIC

CPPFLAGS        += $(COMMS_CPPFLAGS)
CPPFLAGS        += $(MALLOC_CPPFLAGS)
CPPFLAGS        += $(GLOBALVAR_CPPFLAGS)

.PHONY: all default clean

SOURCES  = $(wildcard *.c)
OBJECTS  = $(SOURCES:.c=.o)

all default:	$(OBJECTS)

clean:
	rm -f $(OBJECTS)
