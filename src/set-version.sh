#!/bin/sh

if [ $# -lt 1 ]
then
  echo "Usage: $0 version-source-file"
  exit 1
fi

svn update

rev="`svn info | grep '^Revision:'`"

cat <<_EOT_    > $1
/*
 * AUTOGENERATED BY make, DO NOT EDIT DIRECTLY
 */

char *
shmem_version(void)
{
  return "Super Happy Fun OpenSHMEM, $rev";
}

#ifdef HAVE_PSHMEM_SUPPORT
#pragma weak pshmem_version = shmem_version
#endif /* HAVE_PSHMEM_SUPPORT */
_EOT_
