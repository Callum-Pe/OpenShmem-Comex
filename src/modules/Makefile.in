# (c) 2011 University of Houston System.  All rights reserved.

# ---------------------------------------------------------

HASH_DIR         = ../uthash
HASH_CPPFLAGS    = -I$(HASH_DIR)

# ---------------------------------------------------------

prefix           = @PREFIX@

MODDIR           = $(prefix)/lib/modules

CC               = @CC@
CFLAGS           = @CFLAGS@
CPPFLAGS         = @CPPFLAGS@
LD               = @LD@
LDFLAGS          = @LDFLAGS@

ifeq "@DEBUG@" "TRUE"
CPPFLAGS        += -DDEBUG
endif

# CPPFLAGS        += -I.
CPPFLAGS        += -I..
CPPFLAGS        += -DINSTALLED_MODULES_DIR="\"$(MODDIR)\""
CPPFLAGS        += $(HASH_CPPFLAGS)

CFLAGS          += -fPIC

.PHONY: all default install-lib uninstall-lib clean

SOURCES  = $(wildcard *.c)
OBJECTS  = $(SOURCES:.c=.o)

all default:	$(OBJECTS)

install-lib:
	cp config $(MODDIR)

uninstall-lib:
	rm -f $(MODDIR)/config

clean:
	rm -f $(OBJECTS)
