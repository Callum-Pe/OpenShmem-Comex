
SHELL = /bin/sh

SHMEM_CFLAGS=

GCC=gcc

CC = oshcc


# Please set these variables. They are used in execution time.
# #
# # the run command consists
# # > $RUNCMD $RUNOPT $NCOREOPT $NCORE[...] $NPROCOPT $NPROC[...]  executable

RUNCMD=oshrun
RUNOPT=
NCOREOPT= 
NCORE=
NPROCOPT=-np
NPROC=2

C_TESTS        = $(wildcard *.c)

C_EXES         = $(C_TESTS:.c=.x)

EXES           = $(C_EXES)

.PHONY: clean all default

all default:    $(EXES)

.SUFFIXES: .x

%.x:    %.c
	        $(CC) $(SHMEM_CFLAGS) -o $@ $^



run:
	 $(RUNCMD) $(RUNOPT) $(NPROCOPT) $(NPROC) ./hello.x
	 $(RUNCMD) $(RUNOPT) $(NPROCOPT) $(NPROC) ./cpi.x
	 $(RUNCMD) $(RUNOPT) $(NPROCOPT) $(NPROC) ./sping.x
	 $(RUNCMD) $(RUNOPT) $(NPROCOPT) $(NPROC) ./shmem_daxpy.x
	 $(RUNCMD) $(RUNOPT) $(NPROCOPT) $(NPROC) ./shmem_2dheat.x
	 $(RUNCMD) $(RUNOPT) $(NPROCOPT) $(NPROC) ./shmem_matrix.x
	 $(RUNCMD) $(RUNOPT) $(NPROCOPT) $(NPROC) ./shmem_heat_image.x 10 10


clean:
	        rm -f $(EXES)


